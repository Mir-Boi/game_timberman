!function(){"use strict";function b(){return alert("'"+this.name+"' failed to load."),!0}function c(){return a.fpsCount+=1,Date.now()-a.lastCalledTime>=1e3&&(a.lastCalledTime=Date.now(),a.fps=a.fpsCount,a.fpsCount=0),a.fps}function d(b,c,d,e,f){var g=document.getElementById(b);return null===g?(g=document.createElement("canvas"),g.id=b,g.style.position="absolute",g.style.top=c.toString()+"px",g.style.left=d.toString()+"px",g.width=e,g.height=f,document.body.appendChild(g)):(0===e&&(e=g.width),0===f&&(f=g.height),g.width=e,g.height=f),a.canvas=b,a.x=c,a.y=d,a.width=e,a.height=f,a.context=g.getContext("2d"),a}function e(b){a.context.fillStyle=b,a.context.fillRect(0,0,a.width,a.height)}function f(){return a.width}function g(){return a.height}function h(){var b=document.getElementById(a.canvas);b.style="display: block; margin: 0 auto;"}function i(b){var f,g,c=document.getElementById(a.canvas),d=c.height/c.width,e=window.innerHeight/window.innerWidth;if(e<d?(g=window.innerHeight,f=g/d):(f=window.innerWidth,g=f*d),c.style.width=f+"px",c.style.height=g+"px",1==b){var h=c.style;h.marginLeft="auto",h.marginRight="auto";var j=c.parentElement.style;j.textAlign="center",j.width="100%"}window.addEventListener("resize",i,!1)}function j(){this.x=0,this.y=0,this.z=0,this.width=0,this.height=0,this.remove=!1,this.anchor=[],this.anchor.x=0,this.anchor.y=0,this.rotate=[],this.rotate.angle=0,this.rotate.relatif=!1,this.rotate.vAngle=0,this.clip=[],this.clip.x=0,this.clip.y=0,this.clip.width=0,this.clip.height=0,this.clip.frame=1,this.clip.speed=0,this.flip=[],this.flip.h=1,this.flip.v=1,this.scale=[],this.scale.width=0,this.scale.height=0,this.scroll=[],this.scroll.x=0,this.scroll.y=0,this.scroll.PositionX=0,this.scroll.PositionY=0,this.opacity=1,this.velocity=[],this.velocity.x=0,this.velocity.y=0,this.animations=[],this.load=!1,this.data=0,this.n=0,this.onClick=!1}function k(c,d,e,f,g){void 0===f&&(f=!1),void 0===g&&(g=!1);var h=new j,i=new Image,k=document.createElement("canvas"),l=k.getContext("2d");return k.width=c,k.height=d,l.fillStyle=e,l.fillRect(0,0,c,d),i.onload=function(){h.width=c,h.height=d,h.clip.width=h.width,h.clip.height=h.height,h.scale.width=h.width,h.scale.height=h.height,0!=f&&f(h),0!=g&&(a.inputs[a.inputs.length]=h,h.onClick=g)},i.onerror=b,i.src=k.toDataURL("image/png"),h.image=i,h}function l(c,d,e){function h(){0==g.load&&(g.clip.width=this.width,g.clip.height=this.height,g.width=this.width,g.height=this.height,g.scale.width=this.width,g.scale.height=this.height,0!=d&&d(g),0!=e&&(a.inputs[a.inputs.length]=g,g.onClick=e))}void 0===d&&(d=!1),void 0===e&&(e=!1);var f=new Image,g=new j;return f.onload=h,f.onerror=b,f.name=c,f.src=c,g.image=f,g}function m(a){return Object.assign({},a)}function n(a,b){a.opacity=b}function o(a,b,c,d,e){a.clip.x=b,a.clip.y=c,a.clip.width=d,a.clip.height=e,a.scale.width=d,a.scale.height=e}function p(a,b,c){c===!0?(a.rotate.angle=b,a.rotate.relatif=!0):(a.rotate.angle=b,a.rotate.relatif=!1)}function q(a,b,c){a.scale.width=b,a.scale.height=c}function r(a,b,c){void 0===c&&(c=0),a.velocity.x=b,a.velocity.y=c}function s(a,b,c){void 0===c&&(c=1),a.flip.h=b,a.flip.v=c}function t(a,b,c){a.anchor.x=b,a.anchor.y=c}function u(a,b,c){void 0===c&&(c=0),a.x=b,a.y=c}function v(b,c,d,e,f){void 0===c&&(c=b.x+b.velocity.x),void 0===d&&(d=b.y+b.velocity.y),void 0!==e&&(b.scale.width=e),void 0!==f&&(b.scale.height=f),void 0===b.scale.width&&(b.scale.width=b.width),void 0===b.scale.height&&(b.scale.height=b.height),b.remove=!1,b.x=c,b.y=d,b.rotate.vAngle+b.rotate.angle>360&&(b.rotate.vAngle-=360),(b.rotate.relatif=!0)&&(b.rotate.vAngle+=b.rotate.angle),a.context.save(),a.context.globalAlpha=b.opacity,a.context.translate(b.x,b.y),a.context.rotate(b.rotate.vAngle*a.TO_RADIANS),a.context.scale(b.flip.h,b.flip.v),a.context.drawImage(b.image,b.clip.x,b.clip.y,b.clip.width,b.clip.height,-b.scale.width*b.anchor.x,-b.scale.height*b.anchor.y,b.scale.width,b.scale.height),a.context.restore()}function w(a){a.remove=!0}function x(a,b){if(0==a.remove&&0==b.remove&&a.x-a.clip.width*a.anchor.x<b.x+b.clip.width-b.clip.width*b.anchor.x&&a.x+a.clip.width-a.clip.width*a.anchor.x>b.x-b.clip.width*b.anchor.x&&a.y-a.clip.height*a.anchor.y<b.y+b.clip.height-b.clip.height*b.anchor.y&&a.clip.height+a.y-a.clip.height*a.anchor.y>b.y-b.clip.height*b.anchor.y)return!0}function y(a){return"object"==typeof a}function z(a,b,c,d,e,f,g){var j,k,h=f,i=g;for(void 0===f&&(f=a.scale.width),void 0===g&&(g=a.scale.height),a.scroll.PositionX+=d,a.scroll.PositionY+=e,a.scroll.PositionX>h&&(a.scroll.PositionX=0),a.scroll.PositionX<0&&(a.scroll.PositionX=h),a.scroll.PositionY>i&&(a.scroll.PositionY=0),a.scroll.PositionY<0&&(a.scroll.PositionY=i),j=0;j<2;j++)for(k=0;k<1;k++)v(a,b+h*j-a.scroll.PositionX,c+i*k-a.scroll.PositionY,f,g)}function A(a){return a.width}function B(a){return a.height}function C(b){var c;return a.currentsprite=b,a.currentdraw=document.createElement("canvas"),a.currentdraw.id="temp",a.currentdraw.width=b.width,a.currentdraw.height=b.height,c=a.currentdraw.getContext("2d"),c.drawImage(b.image,0,0),c}function D(){a.currentsprite.load=!0,a.currentsprite.image.src=a.currentdraw.toDataURL("image/png")}function E(a,b,c,d,e,f){var g=new Array;g.frame=c,g.FrameRate=f,g.FrameTimeLife=0,g.CurrentAnimation=0,g.CurrentFrame=0,g.active=!1,a.animations[b]=g,a.clip.width=d,a.clip.height=e,a.scale.width=d,a.scale.height=e}function F(a,b){if(void 0!==a.animations[b]){var c=(new Date).getTime();if(c-a.animations[b].FrameTimeLife>a.animations[b].FrameRate){a.animations[b].FrameTimeLife=c,a.currentAnimation=b;var d=a.width/a.clip.width;a.clip.x=(a.animations[b].frame[a.animations[b].CurrentFrame]-Math.floor(a.animations[b].frame[a.animations[b].CurrentFrame]/d)*d)*a.clip.width,a.clip.y=Math.floor(a.animations[b].frame[a.animations[b].CurrentFrame]/d)*a.clip.height,a.animations[b].CurrentFrame<a.animations[b].frame.length-1?(a.animations[b].CurrentFrame+=1,a.animations[b].active=!0):(a.animations[b].CurrentFrame=0,a.animations[b].active=!1)}}}function G(a,b){return a.animations[b].active}function H(b,c,d,e,f,g){void 0===e&&(e="Arial"),void 0===f&&(f=20),void 0===g&&(g="red"),a.context.font=f.toString()+"px "+e,a.context.fillStyle=g,a.context.fillText(b,c,d)}function I(a,b,c){var g,d="Arial",e=20,f="red";void 0===b&&(b=20),void 0===c&&(c=40),H("x/y: "+a.x+"/"+a.y,b,c,d,e,f),H("width/height: "+a.width+"/"+a.height,b,c+=25,d,e,f),H("scale width/height: "+a.scale.width+"/"+a.scale.height,b,c+=25,d,e,f),H("clip x/y: "+a.clip.x+"/"+a.clip.y,b,c+=25,d,e,f),H("clip width/height: "+a.clip.width+"/"+a.clip.height,b,c+=25,d,e,f),H("rotation: "+a.rotate.vAngle,b,c+=25,d,e,f),void 0!==a.currentAnimation&&(g=a.currentAnimation,H("current animation: "+a.currentAnimation,b,c+=25,d,e,f),H("current frame: "+a.animations[g].frame[a.animations[g].CurrentFrame],b,c+=25,d,e,f))}function J(b,c){var d="Arial",e=20,f="red";void 0===b&&(b=20),void 0===c&&(c=40),H("x/y: "+a.x+"/"+a.y,b,c,d,e,f),H("width/height: "+a.width+"/"+a.height,b,c+=25,d,e,f)}function K(a){return new Howl({src:[a]})}function L(a,b){void 0===b&&(b=1),a._volume=b}function M(a,b){void 0===b&&(b=!1),b===!0&&(a._loop=!0),a.play()}function N(a){a.pause()}function O(a){a.stop()}function P(a){return a.duration()}function Q(a,b){return a.playing()?void 0===b?a.seek():void a.seek(b):0}function R(a,b,c,d){Sound.fade(b,c,d)}function S(){a.key={_released:{},_pressed:{},isDown:function(a){return this._pressed[a]},isReleased:function(a){return this._released[a]},onKeydown:function(a){this._pressed[a.keyCode]=!0,delete this._released[a.keyCode]},onKeyup:function(a){this._released[a.keyCode]=!0,delete this._pressed[a.keyCode]}},window.addEventListener("keyup",function(b){a.key.onKeyup(b)},!1),window.addEventListener("keydown",function(b){a.key.onKeydown(b)},!1),a.initkeyboard=!0}function T(b){if(1==a.initkeyboard){if(1==a.key.isDown(b))return!0}else H("InitKeyboard() is not call",10,20,"system",20,"rgba(255, 0, 0, 255)")}function U(b){if(1==a.initkeyboard){if(a.key.isReleased(b))return delete a.key._released[b],!0}else H("InitKeyboard() is not call",10,20,"system",20,"rgba(255, 0, 0, 255)")}function V(a,b,c){var d=a.getBoundingClientRect(),e=d.width/a.width;return"mousemove"==c?{x:(b.clientX-d.left)/e,y:(b.clientY-d.top)/e}:{x:(b.targetTouches[0].pageX-d.left)/e,y:(b.targetTouches[0].pageY-d.top)/e}}function W(){if(0==a.mousehide)for(var b in a.inputs)if(Y()>a.inputs[b].x&&Y()<a.inputs[b].x+a.inputs[b].scale.width&&Z()>a.inputs[b].y&&Z()<a.inputs[b].y+a.inputs[b].scale.height)return b}function X(b){var c=document.getElementById(a.canvas);void 0===b&&(b=!1),1!=b&&1!=a.mousehide||(a.mousehide=!0,c.style.cursor="none"),c.addEventListener("click",function(b){a.mousebutton=!0;var c=W();c&&0==a.mousehide&&a.inputs[c].onClick(a.inputs[c])}),c.addEventListener("mousemove",function(b){var d=V(c,b,"mousemove");a.mouseX=d.x,a.mouseY=d.y,0==a.mousehide&&(W()?c.style.cursor="pointer":c.style.cursor="auto")}),c.addEventListener("mouseout",function(){a.mouseX=-1,a.mouseY=-1}),c.addEventListener("mousedown",function(){a.mousebutton=!1,a.mousestate=!0}),c.addEventListener("mouseup",function(){a.mousestate=!1}),c.addEventListener("touchstart",function(){a.mousebutton=!1,a.mousestate=!0}),c.addEventListener("touchend",function(){a.mousestate=!1}),c.addEventListener("touchmove",function(b){b.preventDefault(),a.mousebutton=!1,a.mousestate=!0;var d=V(c,b,"touchmove");a.mouseX=d.x,a.mouseY=d.y},!1),a.mouseX=-1,a.mouseY=-1,a.mousebutton=!1,a.mousestate=!1}function Y(){var b=0;return b=a.mouseX===-1?-1:a.mouseX}function Z(){var b=0;return b=a.mouseY===-1?-1:a.mouseY}function $(){var b=a.mousebutton;return a.mousebutton=0,b}function _(){return a.mousestate}function aa(){return document.all?document.body.clientWidth:window.innerWidth}function ba(){return document.all?document.body.clientHeight:window.innerHeight}function ca(a,b){return b++,Math.floor(Math.random()*(b-a))+a}function da(a,b){return Math.random()*(b-a)+a}function ea(a,b,c){return c=c||"0",a+="",a.length>=b?a:new Array(b-a.length+1).join(c)+a}var a=[];a.canvas="game",a.initkeyboard=!1,a.initmouse=!1,a.mousehide=!1,a.TO_RADIANS=Math.PI/180,a.lastCalledTime=0,a.fps=0,a.fpsCount=0,a.inputs=[],a.key={},window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.KEY_BACKSPACE=8,window.KEY_TAB=9,window.KEY_ENTER=13,window.KEY_SHIFT=16,window.KEY_CTRL=17,window.KEY_ALT=18,window.KEY_PAUSE=19,window.KEY_CAPSLOCK=20,window.KEY_ESCAPE=27,window.KEY_SPACE=32,window.KEY_PAGEUP=33,window.KEY_PAGEDOWN=34,window.KEY_END=35,window.KEY_HOME=36,window.KEY_LEFT=37,window.KEY_UP=38,window.KEY_RIGHT=39,window.KEY_DOWN=40,window.KEY_INSERT=45,window.KEY_DELETE=46,window.KEY_0=48,window.KEY_1=49,window.KEY_2=50,window.KEY_3=51,window.KEY_4=52,window.KEY_5=53,window.KEY_6=54,window.KEY_7=55,window.KEY_8=56,window.KEY_9=57,window.KEY_A=65,window.KEY_B=66,window.KEY_C=67,window.KEY_D=68,window.KEY_E=69,window.KEY_F=70,window.KEY_G=71,window.KEY_H=72,window.KEY_I=73,window.KEY_J=74,window.KEY_K=75,window.KEY_L=76,window.KEY_M=77,window.KEY_N=78,window.KEY_O=79,window.KEY_P=80,window.KEY_Q=81,window.KEY_R=82,window.KEY_S=83,window.KEY_T=84,window.KEY_U=85,window.KEY_V=86,window.KEY_W=87,window.KEY_X=88,window.KEY_Y=89,window.KEY_Z=90,window.KEY_LEFTWINDOW=91,window.KEY_RIGHTWINDOW=92,window.KEY_SELECT=93,window.KEY_NUMPAD0=96,window.KEY_NUMPAD1=97,window.KEY_NUMPAD2=98,window.KEY_NUMPAD3=99,window.KEY_NUMPAD4=100,window.KEY_NUMPAD5=101,window.KEY_NUMPAD6=102,window.KEY_NUMPAD7=103,window.KEY_NUMPAD8=104,window.KEY_NUMPAD9=105,window.KEY_MULTIPLY=106,window.KEY_ADD=107,window.KEY_SUBTRACT=109,window.KEY_DECIMALPOINT=110,window.KEY_DIVIDE=111,window.KEY_F1=112,window.KEY_F2=113,window.KEY_F3=114,window.KEY_F4=115,window.KEY_F5=116,window.KEY_F6=117,window.KEY_F7=118,window.KEY_F8=119,window.KEY_F9=120,window.KEY_F10=121,window.KEY_F11=122,window.KEY_F12=123,window.KEY_NUMLOCK=144,window.FPS=c,window.openScreen=d,window.clearScreen=e,window.screenWidth=f,window.screenHeight=g,window.centerScreen=h,window.resizeScreen=i,window.debugScreen=J,window.createSprite=k,window.loadSprite=l,window.anchorSprite=t,window.clipSprite=o,window.scaleSprite=q,window.copySprite=m,window.spritePosition=u,window.spriteVelocity=r,window.displaySprite=v,window.flipSprite=s,window.opacitySprite=n,window.rotateSprite=p,window.scrollSprite=z,window.spriteCollision=x,window.spriteWidth=A,window.spriteHeight=B,window.isSprite=y,window.removeSprite=w,window.debugSprite=I,window.startDrawing=C,window.stopDrawing=D,window.addAnimation=E,window.animationActive=G,window.playAnimation=F,window.loadSound=K,window.pauseSound=N,window.playSound=M,window.resumeSound=O,window.soundLength=P,window.soundVolume=L,window.soundPosition=Q,window.fadeSound=R,window.displayText=H,window.initKeyboard=S,window.keyboardPushed=T,window.keyboardReleased=U,window.isDown,window.initMouse=X,window.mouseButton=$,window.mouseState=_,window.mouseX=Y,window.mouseY=Z,window.windowWidth=aa,window.windowHeight=ba,window.random=ca,window.randomFloat=da,window.rPad=ea}(),!function(){"use strict";function a(){try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(a){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(a){d=!0}else d=!0}var b=null,c=!0,d=!1;if(a(),c){var e="undefined"==typeof b.createGain?b.createGainNode():b.createGain();e.gain.value=1,e.connect(b.destination)}var f=function(){this.init()};f.prototype={init:function(){var a=this||g;return a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a.iOSAutoEnable=!0,a.noAudio=d,a.usingWebAudio=c,a.ctx=b,d||a._setupCodecs(),a},volume:function(a){var b=this||g;if(a=parseFloat(a),"undefined"!=typeof a&&a>=0&&1>=a){b._volume=a,c&&(e.gain.value=a);for(var d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio)for(var f=b._howls[d]._getSoundIds(),h=0;h<f.length;h++){var i=b._howls[d]._soundById(f[h]);i&&i._node&&(i._node.volume=i._volume*a)}return b}return b._volume},mute:function(a){var b=this||g;b._muted=a,c&&(e.gain.value=a?0:b._volume);for(var d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio)for(var f=b._howls[d]._getSoundIds(),h=0;h<f.length;h++){var i=b._howls[d]._soundById(f[h]);i&&i._node&&(i._node.muted=!!a||i._muted)}return b},codecs:function(a){return(this||g)._codecs[a]},_setupCodecs:function(){var a=this||g,b=new Audio,c=b.canPlayType("audio/mpeg;").replace(/^no$/,"");return a._codecs={mp3:!(!c&&!b.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!c,opus:!!b.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!b.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!b.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/m4a;")||b.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(b.canPlayType("audio/x-mp4;")||b.canPlayType("audio/mp4;")||b.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},a},_enableiOSAudio:function(){var a=this||g;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var g=new f,h=function(a){var b=this;return a.src&&0!==a.src.length?void b.init(a):void console.error("An array of source files must be passed with any new Howl.")};h.prototype={init:function(a){var d=this;return d._autoplay=a.autoplay||!1,d._ext=a.ext||null,d._html5=a.html5||!1,d._muted=a.mute||!1,d._loop=a.loop||!1,d._pool=a.pool||5,d._preload="boolean"!=typeof a.preload||a.preload,d._rate=a.rate||1,d._sprite=a.sprite||{},d._src="string"!=typeof a.src?a.src:[a.src],d._volume=void 0!==a.volume?a.volume:1,d._duration=0,d._loaded=!1,d._sounds=[],d._endTimers={},d._onend=a.onend?[{fn:a.onend}]:[],d._onfaded=a.onfaded?[{fn:a.onfaded}]:[],d._onload=a.onload?[{fn:a.onload}]:[],d._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],d._onpause=a.onpause?[{fn:a.onpause}]:[],d._onplay=a.onplay?[{fn:a.onplay}]:[],d._webAudio=c&&!d._html5,"undefined"!=typeof b&&b&&g.iOSAutoEnable&&g._enableiOSAudio(),g._howls.push(d),d._preload&&d.load(),d},load:function(){var a=this,b=null;if(d)return void a._emit("loaderror");"string"==typeof a._src&&(a._src=[a._src]);for(var c=0;c<a._src.length;c++){var e,f;if(a._ext&&a._ext[c]?e=a._ext[c]:(f=a._src[c],e=/^data:audio\/([^;,]+);/i.exec(f),e||(e=/\.([^.]+)$/.exec(f.split("?",1)[0])),e&&(e=e[1].toLowerCase())),g.codecs(e)){b=a._src[c];break}}return b?(a._src=b,new i(a),a._webAudio&&k(a),a):void a._emit("loaderror")},play:function(a){var c=this,d=arguments,e=null;if("number"==typeof a)e=a,a=null;else if("undefined"==typeof a){a="__default";for(var f=0,h=0;h<c._sounds.length;h++)c._sounds[h]._paused&&!c._sounds[h]._ended&&(f++,e=c._sounds[h]._id);1===f?a=null:e=null}var i=e?c._soundById(e):c._inactiveSound();if(!i)return null;if(e&&!a&&(a=i._sprite||"__default"),!c._loaded&&!c._sprite[a])return c.once("load",function(){c.play(c._soundById(i._id)?i._id:void 0)}),i._id;if(e&&!i._paused)return i._id;var j=i._seek>0?i._seek:c._sprite[a][0]/1e3,k=(c._sprite[a][0]+c._sprite[a][1])/1e3-j,l=function(){var d=!(!i._loop&&!c._sprite[a][2]);c._emit("end",i._id),!c._webAudio&&d&&c.stop(i._id).play(i._id),c._webAudio&&d&&(c._emit("play",i._id),i._seek=i._start||0,i._playStart=b.currentTime,c._endTimers[i._id]=setTimeout(l,1e3*(i._stop-i._start)/Math.abs(c._rate))),c._webAudio&&!d&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,c._clearTimer(i._id),i._node.bufferSource=null),c._webAudio||d||c.stop(i._id)};c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate)),i._paused=!1,i._ended=!1,i._sprite=a,i._seek=j,i._start=c._sprite[a][0]/1e3,i._stop=(c._sprite[a][0]+c._sprite[a][1])/1e3,i._loop=!(!i._loop&&!c._sprite[a][2]);var m=i._node;if(c._webAudio){var n=function(){c._refreshBuffer(i);var a=i._muted||c._muted?0:i._volume*g.volume();m.gain.setValueAtTime(a,b.currentTime),i._playStart=b.currentTime,"undefined"==typeof m.bufferSource.start?i._loop?m.bufferSource.noteGrainOn(0,j,86400):m.bufferSource.noteGrainOn(0,j,k):i._loop?m.bufferSource.start(0,j,86400):m.bufferSource.start(0,j,k),c._endTimers[i._id]||(c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate))),d[1]||setTimeout(function(){c._emit("play",i._id)},0)};c._loaded?n():(c.once("load",n),c._clearTimer(i._id))}else{var o=function(){m.currentTime=j,m.muted=i._muted||c._muted||g._muted||m.muted,m.volume=i._volume*g.volume(),m.playbackRate=c._rate,setTimeout(function(){m.play(),d[1]||c._emit("play",i._id)},0)};if(4===m.readyState||!m.readyState&&navigator.isCocoonJS)o();else{var p=function(){c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate)),o(),m.removeEventListener("canplaythrough",p,!1)};m.addEventListener("canplaythrough",p,!1),c._clearTimer(i._id)}}return i._id},pause:function(a){var b=this;if(!b._loaded)return b.once("play",function(){b.pause(a)}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused){if(e._seek=b.seek(c[d]),e._paused=!0,b._webAudio){if(!e._node.bufferSource)return b;"undefined"==typeof e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),e._node.bufferSource=null}else isNaN(e._node.duration)||e._node.pause();arguments[1]||b._emit("pause",e._id)}}return b},stop:function(a){var b=this;if(!b._loaded)return"undefined"!=typeof b._sounds[0]._sprite&&b.once("play",function(){b.stop(a)}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused)if(e._seek=e._start||0,e._paused=!0,e._ended=!0,b._webAudio&&e._node){if(!e._node.bufferSource)return b;"undefined"==typeof e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),e._node.bufferSource=null}else e._node&&!isNaN(e._node.duration)&&(e._node.pause(),e._node.currentTime=e._start||0)}return b},mute:function(a,c){var d=this;if(!d._loaded)return d.once("play",function(){d.mute(a,c)}),d;if("undefined"==typeof c){if("boolean"!=typeof a)return d._muted;d._muted=a}for(var e=d._getSoundIds(c),f=0;f<e.length;f++){var h=d._soundById(e[f]);h&&(h._muted=a,d._webAudio&&h._node?h._node.gain.setValueAtTime(a?0:h._volume*g.volume(),b.currentTime):h._node&&(h._node.muted=!!g._muted||a))}return d},volume:function(){var a,c,d=this,e=arguments;if(0===e.length)return d._volume;if(1===e.length){var f=d._getSoundIds(),h=f.indexOf(e[0]);h>=0?c=parseInt(e[0],10):a=parseFloat(e[0])}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));var i;if(!("undefined"!=typeof a&&a>=0&&1>=a))return i=c?d._soundById(c):d._sounds[0],i?i._volume:0;if(!d._loaded)return d.once("play",function(){d.volume.apply(d,e)}),d;"undefined"==typeof c&&(d._volume=a),c=d._getSoundIds(c);for(var j=0;j<c.length;j++)i=d._soundById(c[j]),i&&(i._volume=a,d._webAudio&&i._node?i._node.gain.setValueAtTime(a*g.volume(),b.currentTime):i._node&&(i._node.volume=a*g.volume()));return d},fade:function(a,c,d,e){var f=this;if(!f._loaded)return f.once("play",function(){f.fade(a,c,d,e)}),f;f.volume(a,e);for(var g=f._getSoundIds(e),h=0;h<g.length;h++){var i=f._soundById(g[h]);if(i)if(f._webAudio){var j=b.currentTime,k=j+d/1e3;i._volume=a,i._node.gain.setValueAtTime(a,j),i._node.gain.linearRampToValueAtTime(c,k),setTimeout(function(a,d){setTimeout(function(){d._volume=c,f._emit("faded",a)},k-b.currentTime>0?Math.ceil(1e3*(k-b.currentTime)):0)}.bind(f,g[h],i),d)}else{var l=Math.abs(a-c),m=a>c?"out":"in",n=l/.01,o=d/n;!function(){var b=a,d=setInterval(function(a){b+="in"===m?.01:-.01,b=Math.max(0,b),b=Math.min(1,b),b=Math.round(100*b)/100,f.volume(b,a),b===c&&(clearInterval(d),f._emit("faded",a))}.bind(f,g[h]),o)}()}}return f},loop:function(){var a,b,c,d=this,e=arguments;if(0===e.length)return d._loop;if(1===e.length){if("boolean"!=typeof e[0])return c=d._soundById(parseInt(e[0],10)),!!c&&c._loop;a=e[0],d._loop=a}else 2===e.length&&(a=e[0],b=parseInt(e[1],10));for(var f=d._getSoundIds(b),g=0;g<f.length;g++)c=d._soundById(f[g]),c&&(c._loop=a,d._webAudio&&c._node&&(c._node.bufferSource.loop=a));return d},seek:function(){var a,c,d=this,e=arguments;if(0===e.length)c=d._sounds[0]._id;else if(1===e.length){var f=d._getSoundIds(),g=f.indexOf(e[0]);g>=0?c=parseInt(e[0],10):(c=d._sounds[0]._id,a=parseFloat(e[0]))}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));if("undefined"==typeof c)return d;if(!d._loaded)return d.once("load",function(){d.seek.apply(d,e)}),d;var h=d._soundById(c);if(h){if(!(a>=0))return d._webAudio?h._seek+d.playing(c)?b.currentTime-h._playStart:0:h._node.currentTime;var i=d.playing(c);i&&d.pause(c,!0),h._seek=a,d._clearTimer(c),i&&d.play(c,!0)}return d},playing:function(a){var b=this,c=b._soundById(a)||b._sounds[0];return!!c&&!c._paused},duration:function(){return this._duration},unload:function(){for(var a=this,b=a._sounds,c=0;c<b.length;c++){b[c]._paused||(a.stop(b[c]._id),a._emit("end",b[c]._id)),a._webAudio||(b[c]._node.src="",b[c]._node.removeEventListener("error",b[c]._errorFn,!1),b[c]._node.removeEventListener("canplaythrough",b[c]._loadFn,!1)),delete b[c]._node,a._clearTimer(b[c]._id);var d=g._howls.indexOf(a);d>=0&&g._howls.splice(d,1)}return j&&delete j[a._src],a=null,null},on:function(a,b,c){var d=this,e=d["_on"+a];return"function"==typeof b&&e.push({id:c,fn:b}),d},off:function(a,b,c){var d=this,e=d["_on"+a];if(b){for(var f=0;f<e.length;f++)if(b===e[f].fn&&c===e[f].id){e.splice(f,1);break}}else e=[];return d},once:function(a,b,c){var d=this,e=function(){b.apply(d,arguments),d.off(a,e,c)};return d.on(a,e,c),d},_emit:function(a,b,c){for(var d=this,e=d["_on"+a],f=0;f<e.length;f++)e[f].id&&e[f].id!==b||setTimeout(function(a){a.call(this,b,c)}.bind(d,e[f].fn),0);return d},_clearTimer:function(a){var b=this;return b._endTimers[a]&&(clearTimeout(b._endTimers[a]),delete b._endTimers[a]),b},_soundById:function(a){for(var b=this,c=0;c<b._sounds.length;c++)if(a===b._sounds[c]._id)return b._sounds[c];return null},_inactiveSound:function(){var a=this;a._drain();for(var b=0;b<a._sounds.length;b++)if(a._sounds[b]._ended)return a._sounds[b].reset();return new i(a)},_drain:function(){var a=this,b=a._pool,c=0,d=0;if(!(a._sounds.length<b)){for(d=0;d<a._sounds.length;d++)a._sounds[d]._ended&&c++;for(d=a._sounds.length-1;d>=0;d--){if(b>=c)return;a._sounds[d]._ended&&(a._webAudio&&a._sounds[d]._node&&a._sounds[d]._node.disconnect(0),a._sounds.splice(d,1),c--)}}},_getSoundIds:function(a){var b=this;if("undefined"==typeof a){for(var c=[],d=0;d<b._sounds.length;d++)c.push(b._sounds[d]._id);return c}return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=b.createBufferSource(),a._node.bufferSource.buffer=j[c._src],a._node.bufferSource.connect(a._panner?a._panner:a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop),a._node.bufferSource.playbackRate.value=c._rate,c}};var i=function(a){this._parent=a,this.init()};if(i.prototype={init:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._seek=0,a._paused=!0,a._ended=!0,a._id=Math.round(Date.now()*Math.random()),b._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,d=g._muted||a._muted||a._parent._muted?0:a._volume*g.volume();return c._webAudio?(a._node="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),a._node.gain.setValueAtTime(d,b.currentTime),a._node.paused=!0,a._node.connect(e)):(a._node=new Audio,a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener("canplaythrough",a._loadFn,!1),a._node.src=c._src,a._node.preload="auto",a._node.volume=d,a._node.load()),a},reset:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._seek=0,a._paused=!0,a._ended=!0,a._sprite=null,a._id=Math.round(Date.now()*Math.random()),a},_errorListener:function(){var a=this;a._node.error&&4===a._node.error.code&&(g.noAudio=!0),a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorListener,!1)},_loadListener:function(){var a=this,b=a._parent;b._duration=Math.ceil(10*a._node.duration)/10,0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b._emit("load")),b._autoplay&&b.play(),a._node.removeEventListener("canplaythrough",a._loadFn,!1)}},c)var j={},k=function(a){var b=a._src;if(j[b])return a._duration=j[b].duration,void n(a);if(/^data:[^;]+;base64,/.test(b)){window.atob=window.atob||function(a){for(var b,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=String(a).replace(/=+$/,""),f=0,g=0,h="";c=e.charAt(g++);~c&&(b=f%4?64*b+c:c,f++%4)?h+=String.fromCharCode(255&b>>(-2*f&6)):0)c=d.indexOf(c);return h};for(var c=atob(b.split(",")[1]),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);m(d.buffer,a)}else{var f=new XMLHttpRequest;f.open("GET",b,!0),f.responseType="arraybuffer",f.onload=function(){m(f.response,a)},f.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete j[b],a.load())},l(f)}},l=function(a){try{a.send()}catch(b){a.onerror()}},m=function(a,c){b.decodeAudioData(a,function(a){a&&(j[c._src]=a,n(c,a))},function(){c._emit("loaderror")})},n=function(a,b){b&&!a._duration&&(a._duration=b.duration),0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a._emit("load")),a._autoplay&&a.play()};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:g,Howl:h}}),"undefined"!=typeof exports&&(exports.Howler=g,exports.Howl=h),"undefined"!=typeof window&&(window.HowlerGlobal=f,window.Howler=g,window.Howl=h,window.Sound=i)}();